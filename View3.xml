<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5">

    <!-- Partie Scrollable (si les infos dépassent l'écran) -->
    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true">

        <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <!-- 1. ZONE PHOTO ET NOM (Superposés) -->
            <FrameLayout
                android:id="@+id/headerContainer"
                android:layout_width="match_parent"
                android:layout_height="300dp"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintEnd_toEndOf="parent">

                <!-- L'image du contact (prend toute la zone) -->
                <ImageView
                    android:id="@+id/ivDetailPhoto"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:src="@android:drawable/ic_menu_gallery"
                    android:scaleType="centerCrop"
                    android:background="#BDC3C7"
                    android:contentDescription="Photo du contact en grand" />

                <!-- Un dégradé noir transparent en bas pour que le texte blanc soit lisible -->
                <View
                    android:layout_width="match_parent"
                    android:layout_height="80dp"
                    android:layout_gravity="bottom"
                    android:background="@drawable/bg_gradient_shadow" />

                <!-- Le Nom et Prénom superposés en bas à gauche -->
                <TextView
                    android:id="@+id/tvDetailName"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="bottom|start"
                    android:layout_margin="16dp"
                    android:text="Nom Prénom"
                    android:textColor="#FFFFFF"
                    android:textSize="28sp"
                    android:textStyle="bold"
                    android:shadowColor="#000000"
                    android:shadowDx="2"
                    android:shadowDy="2"
                    android:shadowRadius="4" />
            </FrameLayout>

            <!-- 2. LES ICONES DU HAUT (Superposées à l'image, en haut à droite) -->
            <!-- Etoile (Favori) -->
            <CheckBox
                android:id="@+id/cbFavorite"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:button="@android:drawable/btn_star"
                android:buttonTint="#FFD700"
                android:background="?attr/selectableItemBackgroundBorderless"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintEnd_toStartOf="@id/ivEdit"
                android:layout_marginTop="16dp"
                android:layout_marginEnd="8dp" />
            <!-- Note: buttonTint colorie l'étoile en Or -->

            <!-- Crayon (Modifier) -->
            <ImageView
                android:id="@+id/ivEdit"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:src="@android:drawable/ic_menu_edit"
                app:tint="#FFFFFF"
                android:padding="12dp"
                android:background="?attr/selectableItemBackgroundBorderless"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintEnd_toStartOf="@id/ivMoreOptions"
                android:layout_marginTop="16dp"
                android:layout_marginEnd="4dp"
                android:contentDescription="Modifier" />

            <!-- 3 petits points (Menu options) -->
            <ImageView
                android:id="@+id/ivMoreOptions"
                android:layout_width="48dp"
                android:layout_height="48dp"
                android:src="@android:drawable/ic_menu_more"
                app:tint="#FFFFFF"
                android:padding="12dp"
                android:background="?attr/selectableItemBackgroundBorderless"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                android:layout_marginTop="16dp"
                android:layout_marginEnd="8dp"
                android:contentDescription="Plus d'options" />


            <!-- 3. ZONE NUMÉRO ET ACTIONS (En dessous de la photo) -->
            <androidx.cardview.widget.CardView
                android:id="@+id/cardPhone"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="16dp"
                app:cardCornerRadius="12dp"
                app:cardElevation="4dp"
                app:cardBackgroundColor="#FFFFFF"
                app:layout_constraintTop_toBottomOf="@id/headerContainer">

            </androidx.cardview.widget.CardView>

            <androidx.constraintlayout.widget.ConstraintLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="16dp"
                tools:layout_editor_absoluteX="6dp"
                tools:layout_editor_absoluteY="368dp">

                <TextView
                    android:id="@+id/tvLabelMobile"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Mobile"
                    android:textColor="#7F8C8D"
                    android:textSize="12sp"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />

                <!-- Le Numéro (A gauche) -->
                <TextView
                    android:id="@+id/tvDetailPhone"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="4dp"
                    android:text="06 12 34 56 78"
                    android:textColor="#2C3E50"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toStartOf="@id/btnMessage"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/tvLabelMobile" />

                <!-- Bouton Appeler (Vert) -->

                <!-- Bouton Message (Bleu ou Orange) -->

                <ImageButton
                    android:id="@+id/btnCall"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_marginEnd="64dp"
                    android:background="@drawable/bg_circle_action"
                    android:backgroundTint="#2ECC71"
                    android:contentDescription="Appeler"
                    android:src="@android:drawable/ic_menu_call"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintTop_toTopOf="parent"
                    app:layout_constraintVertical_bias="0.0"
                    app:tint="#FFFFFF" />

                <ImageButton
                    android:id="@+id/btnMessage"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_marginEnd="108dp"
                    android:background="@drawable/bg_circle_action"
                    android:backgroundTint="#3498DB"
                    android:contentDescription="Envoyer un message"
                    android:src="@android:drawable/sym_action_chat"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toStartOf="@id/btnCall"
                    app:layout_constraintTop_toTopOf="parent"
                    app:layout_constraintVertical_bias="0.0"
                    app:tint="#FFFFFF" />

            </androidx.constraintlayout.widget.ConstraintLayout>

        </androidx.constraintlayout.widget.ConstraintLayout>
    </androidx.core.widget.NestedScrollView>

    <!-- 4. BOUTON SUPPRESSION (Flottant en bas à droite, forme de corbeille) -->
    <!-- J'ai mis 'bottom|end' pour bas-droite comme c'est le standard pour ce type de FAB secondaire -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabDelete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|end"
        android:layout_margin="24dp"
        android:src="@android:drawable/ic_menu_delete"
        app:tint="#FFFFFF"
        app:backgroundTint="#E74C3C"
        app:elevation="6dp"
        android:contentDescription="Supprimer le contact" />
    <!-- Note: E74C3C est un rouge "Danger" -->

</androidx.coordinatorlayout.widget.CoordinatorLayout>
